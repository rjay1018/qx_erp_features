<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_delivery_document_inherit_client_barcode" inherit_id="stock.report_delivery_document">
        <!-- Case 1: Detailed Operations (stock.move.line) -->
        <xpath expr="//table[hasclass('table-sm')]//t[@t-foreach='o.move_line_ids_without_package']//span[@t-field='move_line.product_id']/.." position="inside">
            <br/>
            <t t-if="move_line.move_id.client_barcode">
                <barcode t-att-code="move_line.move_id.client_barcode" type="Code128" width="600" height="100"/>
            </t>
        </xpath>

        <!-- Case 2: Move Lines (stock.move) -->
        <xpath expr="//table[hasclass('table-sm')]//t[@t-foreach='o.move_lines']//span[@t-field='move.product_id']/.." position="inside">
            <br/>
            <t t-if="move.client_barcode">
                <barcode t-att-code="move.client_barcode" type="Code128" width="600" height="100"/>
            </t>
        </xpath>
    </template>
</odoo>
